---
const { title, description, image } = Astro.props;

const siteName = "Mi Amigo Anhelado";
const defaultDescription = "La enseñanza pura de Dios y el Señor Jesucristo.";
const defaultImage = "https://miamigoanhelado.com/og-image.jpg";

// Construir URL canónica dinámica
const canonicalURL = new URL(Astro.url.pathname, Astro.site);

// Resolver imagen (string u objeto)
const resolvedImage = image?.src || image || defaultImage;

// Colores
const primaryColor = "#1a4d2e";
const accentColor = "#d4a574";
---

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content={Astro.generator} />

    <!-- SEO Básico -->
    <title>{title} | {siteName}</title>
    <meta name="description" content={description || defaultDescription} />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href={canonicalURL} />

    <!-- Open Graph -->
    <meta property="og:type" content="article" />
    <meta property="og:site_name" content={siteName} />
    <meta property="og:title" content={`${title} | ${siteName}`} />
    <meta property="og:description" content={description || defaultDescription} />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:image" content={resolvedImage} />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={`${title} | ${siteName}`} />
    <meta name="twitter:description" content={description || defaultDescription} />
    <meta name="twitter:image" content={resolvedImage} />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

    <style define:vars={{ primaryColor, accentColor }}>
        :root {
            --primary: var(--primaryColor);
            --accent: var(--accentColor);
            --bg-soft: #fdfdfd;
            --text-dark: #1a202c;
        }

        * { box-sizing: border-box; }

        body {
            font-family: 'Crimson Text', Georgia, serif;
            line-height: 1.7;
            margin: 0;
            padding: 0;
            background-color: var(--bg-soft);
            color: var(--text-dark);
            -webkit-font-smoothing: antialiased;
        }

        .layout-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 1.5rem;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Nav Optimizada */
        nav {
            padding: 2rem 0;
            text-align: center;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            margin-bottom: 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        nav a {
            text-decoration: none;
            color: var(--text-dark);
            font-weight: 600;
            padding: 5px 10px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            position: relative;
        }

        nav a:hover {
            color: var(--accent);
        }

        /* Estilo especial para el botón de Blog/Reflexiones */
        nav a.nav-blog {
            border: 1.5px solid var(--accent);
            border-radius: 25px;
            padding: 5px 20px;
            color: var(--accent);
        }

        nav a.nav-blog:hover {
            background-color: var(--accent);
            color: white;
        }

        main {
            flex: 1; 
        }

        footer {
            text-align: center;
            margin-top: 4rem;
            padding: 3rem 1rem;
            font-size: 0.95rem;
            color: #718096;
            border-top: 2px solid #f1ece4;
        }

        .footer-brand {
            font-family: 'Playfair Display', serif;
            color: var(--primary);
            font-size: 1.2rem;
            display: block;
            margin-bottom: 0.5rem;
        }

        @media (max-width: 600px) {
            nav { padding: 1.5rem 0; gap: 0.5rem; }
            nav a { font-size: 0.95rem; padding: 5px; }
            nav a.nav-blog { padding: 5px 12px; }
        }
        .slogan {
    font-style: italic;
    color: var(--primary);
    font-weight: 600;
    margin: 10px 0;
}
.footer-line {
    width: 40px;
    height: 2px;
    background: var(--accent);
    margin: 10px auto;
}
    </style>
</head>
<body>
    <div class="layout-container">
        <header>
            <nav>
                <a href="/">Inicio</a> 
                <a href="/app-biblia">Biblia</a> 
                <a href="/vivencias">Personajes</a>
                <a href="/blog" class="nav-blog">Reflexiones</a>
            </nav>
        </header>
        
        <main>
            <slot /> 
        </main>

        <footer>
    <span class="footer-brand">Mi Amigo Anhelado</span>
    <p class="slogan">"No interpretamos, solo exponemos lo que está escrito."</p>
    <p>&copy; {new Date().getFullYear()} — La Verdad que Liberta</p>
    <div class="footer-line"></div>
</footer>
    </div>
</body>
</html>
